# Quick Reference - Authentication & Profile System

## Key Files by Category

### Authentication Files
- `/home/user/waarheid/signin.html` - Client login page
- `/home/user/waarheid/signup.html` - Client registration page
- `/home/user/waarheid/admin-login.html` - Admin login (credentials: admin@waarheid.nl / admin123)
- `/home/user/waarheid/js/auth.js` - Login/signup form handlers
- `/home/user/waarheid/js/auth-state.js` - Global auth state & header menu

### Dashboard Files
- `/home/user/waarheid/dashboard.html` - Client dashboard
- `/home/user/waarheid/admin-dashboard.html` - Admin dashboard
- `/home/user/waarheid/js/dashboard.js` - Client dashboard logic (2,618 lines)
- `/home/user/waarheid/js/admin.js` - Admin dashboard logic (3,937 lines)

### Data & Database
- `/home/user/waarheid/js/data-manager.js` - Data management system
- `/home/user/waarheid/js/database-init.js` - Demo data initialization
- Demo test accounts: john@example.com, sarah@example.com, mike@example.com (all use password123)

### Styling
- `/home/user/waarheid/css/style.css` - Header menu styles (lines 492-593)
- `/home/user/waarheid/css/dashboard.css` - Dashboard styles
- `/home/user/waarheid/css/admin.css` - Admin styles
- `/home/user/waarheid/css/auth.css` - Auth pages styles

---

## localStorage Keys

### Session Keys
```javascript
localStorage.getItem('authToken')        // Auth token
localStorage.getItem('userEmail')        // User email
localStorage.getItem('userRole')         // 'client' or 'admin'
localStorage.getItem('userData')         // Full user object (JSON)
localStorage.getItem('rememberMe')       // Remember me flag
```

### Data Keys
```javascript
localStorage.getItem('waarheid_clients')
localStorage.getItem('waarheid_projects')
localStorage.getItem('waarheid_consultations')
localStorage.getItem('waarheid_messages')
localStorage.getItem('waarheid_invoices')
localStorage.getItem('waarheid_analytics')
localStorage.getItem('waarheid_tickets')
localStorage.getItem('waarheid_db_initialized')
```

---

## Critical Functions

### Check if logged in
```javascript
WaarheidAuth.isLoggedIn()   // Returns boolean
WaarheidAuth.isAdmin()      // Returns boolean
WaarheidAuth.getCurrentUser()  // Returns userData object
```

### Logout
```javascript
WaarheidAuth.logout()  // Clears all auth data & redirects home
```

### Open auth modal
```javascript
WaarheidAuth.openAuthModal('signin')   // Open sign in tab
WaarheidAuth.openAuthModal('signup')   // Open sign up tab
```

---

## User Data Structure

```javascript
{
  clientId: "client_1234567890_abc123",
  firstName: "John",
  lastName: "Smith",
  email: "john@example.com",
  company: "Tech Solutions Inc",
  createdAt: "2024-01-15T00:00:00.000Z"
}
```

---

## Dropdown Menu Locations

1. **Header Menu** (All pages when logged in)
   - Location: Top-right corner
   - Classes: `.user-menu-header`, `.user-dropdown-header`
   - File: auto-generated by auth-state.js

2. **Dashboard Menu** (dashboard.html)
   - Location: Header
   - Classes: `.user-menu`, `.user-dropdown`
   - File: dashboard.html lines 28-44

3. **Admin Menu** (admin-dashboard.html)
   - Location: Header
   - Classes: `.user-menu`, `.user-dropdown`
   - File: admin-dashboard.html lines 30-45

---

## Not Implemented

- Profile page (placeholder link to #)
- Settings page (placeholder link to #)
- Two-factor authentication
- Password reset functionality
- Social OAuth logins
- Real backend authentication

---

## Implementation Roadmap

1. Create `/home/user/waarheid/profile.html`
2. Create `/home/user/waarheid/settings.html`
3. Create `/home/user/waarheid/js/profile.js`
4. Create `/home/user/waarheid/js/settings.js`
5. Update profile/settings links in auth-state.js
6. Extend userData structure with new fields
7. Add RBAC middleware
8. Connect to real authentication API

